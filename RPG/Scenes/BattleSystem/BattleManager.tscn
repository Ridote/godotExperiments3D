[gd_scene load_steps=3 format=2]

[ext_resource path="res://GUI/BattleSystem/BattleGUI.tscn" type="PackedScene" id=1]

[sub_resource type="GDScript" id=1]
script/source = "extends Node

# warning-ignore:unused_class_variable
var characterScene = preload(\"res://Scenes/BattleSystem/BattleCharacter.tscn\")

var turns : int = 0

var enemies = []
var allies = []

func _ready():
	if $BattleGUI.connect(\"nextTurn\", self, \"nextTurn\"):
		OS.alert(\"Error connecting next turn\")
	
	var positionOffset = 0
	for player_id in range(0,Players.players.size()):
		var new_character = characterScene.instance()
		new_character.setAlly(player_id)
		new_character.transform.origin = $Allies.transform.origin
		new_character.transform.origin.z += positionOffset
		positionOffset += 5
		allies.push_back(new_character)
		add_child(new_character)
	
	#TODO Enemies
	var new_character = characterScene.instance()
	new_character.transform.origin = $Enemies.transform.origin
	new_character.initialize(\"Dago\", 12, 14, 15, 5, 25, 30)
	enemies.push_back(new_character)
	add_child(new_character)
	
func nextTurn() -> void:
	turns += 1
	print(\"nextTurn!\")"

[node name="BattleManager" type="Node"]
script = SubResource( 1 )

[node name="BattleGUI" parent="." instance=ExtResource( 1 )]

[node name="Camera" type="Camera" parent="."]
transform = Transform( 0.963127, 0.121462, -0.240071, 0, 0.892297, 0.451448, 0.269049, -0.434802, 0.859395, 0.530602, 4.20937, 21.4686 )

[node name="Allies" type="Position3D" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 0, 0 )

[node name="Enemies" type="Position3D" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 0, 0 )
